{% extends "main.html" %}
{% block content %}
	<div class="row divider green">
		<div class="col-md-12"></div>
	</div>
	<div class="row banner menu">
		<div class="col-md-11 col-md-offset-1 padding-none">
			<h1 style="text-transform: capitalize;">Edit {{category.name }} - {{ item.name }}</h1>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6 col-md-offset-1 padding-top">
			<form action="#" method = "post">
				<div class="form-group">
				<div class="form-group">
					<label for="image">Photo</label>
					<input name="image" type="file" accept="image/*" onchange="previewFile()"/>
					<img src="{{item.photo}}" height="200" alt="Image preview...">
					<input type=hidden name=photo value="{{item.photo}}">
					<input type=hidden name=_csrf_token value="{{ _csrf_token }}">
				</div>
				<div class="form-group">
					<label for="name">Name:</label>
					<input type ="text" maxlength="100" class="form-control" name="name" value="{{item.name }}">
				</div>
				<div class="form-group">
					<label for="description">Description:</label>
					<textarea class="form-control" maxlength="250" rows="3" name="description">{{item.description}}</textarea>
				</div>
				<div class="form-group">
					<label for="price">Price:</label>
					<div class="input-group">
						<div class="input-group-addon">$</div>
						<input type ="text" maxlength="10" class="form-control" name="price" value="{{item.price}}">
					</div>
				</div>
					<button type="submit" class="btn btn-default" id="submit" type="submit">
					<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>Save</button>
					<a href = '{{request.referrer}}'>
						<button type="button" class="btn btn-default delete">
						<span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Cancel</button>
					</a>
				</div>
			</form>
		</div>
	</div>
	<script>
		function previewFile() {
		  var preview = document.querySelector('img');
		  var fileInput = document.querySelector('input[name=photo]');
		  var file    = document.querySelector('input[type=file]').files[0];
		  var reader  = new FileReader();

		  reader.addEventListener("load", function () {
		  	console.log('result', reader.result);
		  	fileInput.value = reader.result;
		    preview.src = reader.result;
		  }, false);

		  if (file) {
		    reader.readAsDataURL(file);
		  }
		}
	</script>
{% endblock %}